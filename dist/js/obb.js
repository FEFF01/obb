!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var r in e)("object"==typeof exports?exports:t)[r]=e[r]}}(window,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";var r,o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),o=0;for(n=0;n<e;n++)for(var i=arguments[n],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r};Object.defineProperty(n,"__esModule",{value:!0}),n.reaction=n.watch=n.computed=n.SANDOBX_OPTION=n.runInSandbox=n.sandbox=n.runInAction=n.action=n.runInAtom=n.atom=n.autorun=n.observable=n.Subscriber=n.Observer=void 0,function(t){t[t.PREVENT_COLLECT=1]="PREVENT_COLLECT",t[t.CLEAN_SUBSCRIBE=2]="CLEAN_SUBSCRIBE",t[t.CLEAN_CHANGE=4]="CLEAN_CHANGE",t[t.DEFAULT=7]="DEFAULT",t[t.NORMAL=0]="NORMAL"}(r||(r={})),n.SANDOBX_OPTION=r;var u=[],a=[],c=[],f=[],s=new WeakMap,l=[],h=["iterate"],p=["undefined"],d=function(){function t(t){var n=this;this.target=t,this.refmap=new Map,this.ownmap=new Map,this._has=function(t){return t in n.target},this._val=function(t){return n.target[t]},this._del=function(t){return delete n.target[t]},this._set=function(t,e){return n.target[t]=e},this._proxy_handler={get:function(t,e){var r=t[e];return"__proto__"!==e&&(r=O(r),n.collect(e)),r},set:function(t,e,r){var o=t[e],i=s.get(r),u=i?i.target:r,a=t.hasOwnProperty(e),c=x(o,u);return c&&a||(t[e]=u),a||(n.notify(e,!1,1),n.notify(h,h,1)),c||n.notify(e,o),!0},ownKeys:function(t){return n.collect(h,1),_(t)},has:function(t,e){return n.collect(e,1),e in t},deleteProperty:function(t,e){return g((function(){return t.hasOwnProperty(e)&&(n.notify(e,t[e]),n.notify(e,!0,1),n.notify(h,h,1)),delete t[e]}))}};var e=s.get(t);if(e)return e;switch(!0){case t instanceof WeakSet:case t instanceof WeakMap:case t instanceof Map:case t instanceof Set:w(this);break;case t[Symbol.iterator]:case t instanceof Array:!function(t){var n=t.target,e=n.__proto__,r=t._proxy_handler.set;n.__proto__=Object.create(e,Array.prototype.concat.call(["push","pop","shift","unshift","splice","sort","reverse"].map((function(t){var n=e[t];return n&&[t,function(){var t=this,e=arguments;return g((function(){return n.apply(t,e)}))}]})),["values",Symbol.iterator].map((function(r){var o=e[r];return o&&[r,function(){return t.collect(h,1),N(o.call(n))}]}))).reduce((function(t,n){return n&&(t[n[0]]={value:n[1]}),t}),{})),t._proxy_handler.set=function(e,o,i){var u=n.length;return g((function(){var a=r(e,o,i);return n.length!==u&&t.notify("length",u,10),a}))}}(this)}this.proxy=new Proxy(t,this._proxy_handler),s.set(this.proxy,this),s.set(t,this)}return t.prototype.collect=function(t,n){void 0===n&&(n=2);var e=u[0];if(e&&!e.passive){var r=this._map(n),o=r.get(t);o||r.set(t,o=new Set),e.depend(o)}},t.prototype.release=function(){for(var t=0,n=[this.refmap,this.ownmap];t<n.length;t++){var e=n[t];e.forEach((function(t){t.forEach((function(n){return n.undepend(t)}))})),e.clear()}},t.prototype.notify=function(t,n,e){void 0===e&&(e=2);var r=[this,t,n,e];l.length&&l[0][0].push(r);var o=this._map(e).get(t);o&&o.size&&A(Array.from(o),f.length&&r)},t.prototype._map=function(t){return 2&t?this.refmap:this.ownmap},t}();n.Observer=d;var v=function(){function t(t,n){this.fn=t,this.passive=n,this.children=[],this._deps=new Set,this.is_run=!1}return t.prototype.undepend=function(t){this._deps.delete(t),t.delete(this)},t.prototype.depend=function(t){this._deps.add(t),t.add(this)},t.prototype.clear=function(t){var n=this;if(this._deps.forEach((function(t){return t.delete(n)})),this._deps.clear(),!t)for(var e=0,r=this.children;e<r.length;e++){var o=r[e];o.clear(),o.parent=void 0}this.children.length=0},t.prototype.unmount=function(t){var n;if(this.clear(t),!t){var e=null===(n=this.parent)||void 0===n?void 0:n.children;if(e&&e.splice(e.indexOf(this),1),this._sandbox){var r=this._sandbox[1].indexOf(this);r>=0&&this._sandbox[1].splice(r,1)}}this._sandbox=void 0,this.parent=void 0},t.prototype.mount=function(){return void 0!==this.parent?new t(this.fn).mount():(l.length&&(this._sandbox=l[0],this._sandbox[1].push(this)),this.parent=u[0]||null,this.parent&&this.parent.children.push(this),this._run(),this)},t.prototype.update=function(){return this.clear(),this._run()},t.prototype.addRecord=function(t){var n=f[0][0],e=c.indexOf(this);e<0||a[e][0]<n?(a.unshift([n,[t]]),c.unshift(this)):a[e][1].push(t)},t.prototype._run=function(){this.is_run=!0,u.unshift(this);try{return this.res=this.fn()}catch(t){throw t}finally{u.shift(),this.is_run=!1}},t}();function _(t){return Array.prototype.concat.call(Object.getOwnPropertySymbols(t),Object.getOwnPropertyNames(t))}function y(t,n){!function(t){var n=f[0],e=void 0===t&&n?1&n[1]:t?1:0;f.unshift([t&&n?n[0]:f.length,e])}(n);try{return t()}catch(t){throw t}finally{!function(){var t=[],n=f.shift(),e=n[0];if(1&n[1]&&0!==f.length)return;for(;c.length&&a[0][0]>=e;){var r=c.shift(),o=a.shift();if(t.indexOf(r)<0&&m(o[1])){for(var i=void 0;(i=c.lastIndexOf(r))>=0;)c.splice(i,1),a.splice(i,1);t.unshift(r)}}A(t)}()}}function g(t){return y(t,!0)}function b(t,n){void 0===n&&(n=r.DEFAULT);var e=l[0],o=u[0],i=o&&o.passive,a=n&r.CLEAN_CHANGE||!e?[]:e[1],c=a.length,f=n&r.CLEAN_CHANGE||!e?[]:e[0];o&&(o.passive=n&r.PREVENT_COLLECT),l.unshift([f,a,n|(e&&e[2]&r.CLEAN_CHANGE)]);try{return t()}catch(t){throw t}finally{if(l.shift(),n&r.CLEAN_CHANGE&&function(t){var n=[];m(t,(function(t){var e=t[0],r=t[1],o=t[3];if(1&o)e._del(r);else if(4&~o){if(8&o)return void n.push(t);e._set(r,t[2])}}));for(var e=0,r=n;e<r.length;e++){var o=r[e];o[0]._set(o[1],o[2])}}(f),n&r.CLEAN_SUBSCRIBE){for(var s=a.length-1;s>=c;s--){var h=a[s];h.unmount(h.parent!==o)}a.length=c}else e&&n&r.CLEAN_CHANGE&&Array.prototype.push.apply(e[1],a);o&&(o.passive=i)}}function O(t){return t&&"object"==typeof t?new d(t).proxy:t}function E(t,n){var e=[],r=new v((function(){e.unshift(t()),e.length>1&&(n(e[0],e[1]),e.length=1)}));return r.mount(),function(){r.unmount()}}function m(t,n){for(var e=new Map,r=!1,o=0,i=t;o<i.length;o++){var u=i[o],a=u[0],c=u[1],f=e.get(a);if(f){if(f.has(c))continue;f.add(c)}else e.set(a,new Set([c]));if(!x(1!==u[3]?a._val(c):a._has(c),u[2])){if(!n)return!0;-1===n(u)&&f.delete(c),r=!0}}return r}function A(t,n){var e=l[0],o=e&&e[2]&r.CLEAN_CHANGE&&e[1];function i(t){return!o||o.indexOf(t)>=0}t:for(var u=0;u<t.length;u++){for(var a=t[u];(a=a.parent)&&!a.is_run&&i(a);)if(t.indexOf(a)>=0){t.splice(u--,1);continue t}!(a=t[u]).is_run&&i(a)||t.splice(u--,1)}t.forEach(n?function(t){return t.addRecord(n)}:function(t){return t.update()})}function x(t,n){return t===n||t!=t&&n!=n}function w(t){var n,e=t.target,r=e.__proto__,u=new d({}),a=(null===(n=Object.getOwnPropertyDescriptor(r,"size"))||void 0===n?void 0:n.get.bind(e))||function(){};t.release=function(){return u.release(),t.release()},u._has=r.has.bind(e),u._val=e instanceof Map||e instanceof WeakMap?function(t){return r.get.call(e,t)}:function(t){return r.has.call(e,t)?t:p},u._del=function(t){return r.delete.call(e,t)},u._set=r.set?function(t,n){return r.set.call(e,t,n)}:function(t,n){return r.add.call(e,t)};for(var c=o({get:function(t){return u.collect(t),O(r.get.call(e,t))},set:function(t,n){var o=r.has.call(e,t),i=o?r.get.call(e,t):void 0;return r.set.call(e,t,n),o||u.notify(t,!1,1),u.notify(t,i),this},add:function(n){return r.has.call(e,n)||g((function(){var o=a();r.add.call(e,n),void 0!==o&&t.notify("size",o,6),u.notify(n,!1,1),u.notify(n,p),u.notify(h,h,1)})),this},delete:function(n){var o=r.get,i=o?o.call(e,n):n,c=a(),f=r.delete.call(e,n);return f&&g((function(){u.notify(n,i),u.notify(n,!0,1),u.notify(h,h,1),void 0!==c&&t.notify("size",c,6)})),f},clear:function(){var n=a();n&&g((function(){r.forEach.call(e,(function(t,n){u.notify(n,t),u.notify(n,!0,1)})),u.notify(h,h,1),t.notify("size",n,6),r.clear.call(e)}))},forEach:function(t){for(var n,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return u.collect(h,1),(n=r.forEach).call.apply(n,i([e,function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.apply(void 0,i([O(n)],e))}],o))},has:function(t){return u.collect(t,1),r.has.call(e,t)},size:a},["keys","entries","values",Symbol.iterator].reduce((function(t,n){var o=r[n];return o&&(t[n]=function(){return u.collect(h,1),N(o.apply(e,arguments))}),t}),{})),f={},s=0,l=_(r);s<l.length;s++){var v=l[s],y=c[v],b=Object.getOwnPropertyDescriptor(r,v);y&&(void 0!==b.value?b.value=y:b.get=y),f[v]=b}e.__proto__=Object.create(e.__proto__.__proto__,f)}function N(t){var n=t.next.bind(t);return t.next=function(){var t=n(),e=t.done,r=t.value;return e||(r=O(r)),{done:e,value:r}},t}n.Subscriber=v,n.atom=function(t){return y.bind(null,t,!0)},n.runInAtom=g,n.action=function(t){return y.bind(null,t)},n.runInAction=function(t){return y(t)},n.sandbox=function(t){return b.bind(null,t)},n.runInSandbox=b,n.autorun=function(t,n){void 0===n&&(n=!1);var e=new v(t,n);return e.mount(),function(){e.unmount()}},n.observable=O,n.computed=function(t){var n,e=0,r=new v((function(){(e^=1)&&(n=t())}));return function(){return e||r.update(),n}},n.watch=E,n.reaction=function(t,n){return E(t,(function(t,e){x(t,e)||n(t)}))}}])}));
//# sourceMappingURL=obb.js.map