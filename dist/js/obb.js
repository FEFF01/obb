!function(t,n){for(var e in n)t[e]=n[e]}(exports,function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";(function(t){var e,r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(n,"__esModule",{value:!0}),n.MASK_UNDEFINED=n.MASK_ITERATE=n.reaction=n.watch=n.computed=n.SUBSCRIBE_OPTION=n.transacts=n.runInSandbox=n.sandbox=n.runInAction=n.action=n.runInAtom=n.atom=n.autorun=n.observable=n.Subscriber=n.Observer=void 0,function(t){t[t.DEFAULT=0]="DEFAULT",t[t.PREVENT_COLLECT=1]="PREVENT_COLLECT",t[t.COMPUTED=2]="COMPUTED"}(e||(e={})),n.SUBSCRIBE_OPTION=e;var o="object"==typeof window?window:t,a=[],u=[],c=[],s=[],f=new WeakMap,l=[],h=["iterate"];n.MASK_ITERATE=h;var p=["undefined"];n.MASK_UNDEFINED=p;var d=function(){function t(t){var n=this;switch(this.target=t,this.refmap=new Map,this.ownmap=new Map,this._has=function(t){return t in n.target},this._val=function(t){return n.target[t]},this._del=function(t){return delete n.target[t]},this._set=function(t,e){return n.target[t]=e},this._proxy_handler={get:function(t,e){var r=t[e];return"__proto__"!==e&&(r=M(r),n.collect(e)),r},set:function(t,e,r){var i=t[e],o=f.get(r),a=o?o.target:r,u=t.hasOwnProperty(e),c=L(i,a);return c&&u||O((function(){t[e]=a,u||(n.notify(e,!1,1),n.notify(h,h,1)),c||n.notify(e,i)})),!0},ownKeys:function(t){return n.collect(h,1),_(t)},has:function(t,e){return n.collect(e,1),e in t},deleteProperty:function(t,e){return O((function(){return t.hasOwnProperty(e)&&(n.notify(e,t[e]),n.notify(e,!0,1),n.notify(h,h,1)),delete t[e]}))}},!0){case t instanceof WeakSet:case t instanceof WeakMap:case t instanceof Map:case t instanceof Set:k(this);break;case t[Symbol.iterator]:case t instanceof Array:!function(t){var n=t.target,e=n.__proto__;n.__proto__=Object.create(e,Array.prototype.concat.call(["push","pop","shift","unshift","splice","sort","reverse"].map((function(t){var n=e[t];return n&&[t,function(){var t=this,e=arguments;return O((function(){return n.apply(t,e)}))}]})),["values",Symbol.iterator].map((function(r){return e[r]&&[r,function(){t.collect(h,1);var e=0,r=t.proxy;return{next:function(){var i,o=e>=n.length;return o||(t.collect(e),i=r[e++]),{done:o,value:i}}}}]}))).reduce((function(t,n){return n&&(t[n[0]]={value:n[1]}),t}),{}));var r=t._proxy_handler.set;t._proxy_handler.set=function(e,i,o){var a=n.length;return O((function(){var u=r(e,i,o);return n.length!==a&&"length"!==i&&t.notify("length",a,10),u}))}}(this)}this.proxy=new Proxy(t,this._proxy_handler),f.set(this.proxy,this),f.set(t,this)}return t.TO_RAW=function(t){var n=f.get(t);return n?n.target:t},t.TO_OB=function(t){return f.get(t)},t.prototype.collect=function(t,n){void 0===n&&(n=2);var r=a[0];if(r&&!(r.option&e.PREVENT_COLLECT)){var i=this._map(n),o=i.get(t);o||i.set(t,o=new Set),r.depend(o)}},t.prototype.release=function(){for(var t=0,n=[this.refmap,this.ownmap];t<n.length;t++){var e=n[t];e.forEach((function(t){t.forEach((function(n){return n.undepend(t)}))})),e.clear()}},t.prototype.notify=function(t,n,e){void 0===e&&(e=2);var r=[this,t,n,e];l.length&&l[0][0].push(r);var i=this._map(e).get(t);if(i&&i.size)if(s.length)i.forEach((function(t){return t.addRecord(r)}));else{var o=Number.MAX_SAFE_INTEGER;i.forEach((function(t){(void 0).push(t),o>t.depth&&(o=t.depth)})),U(void 0,o)}},t.prototype._map=function(t){return 2&t?this.refmap:this.ownmap},t}();n.Observer=d;var v=function(){function t(t,n){void 0===n&&(n=e.DEFAULT),this.fn=t,this.option=n,this.depth=0,this.children=[],this._deps=new Set,this._once={},this.is_run=!1,this.brokens=[],this.accu=0}return Object.defineProperty(t,"PARENT",{get:function(){return a[0]},enumerable:!1,configurable:!0}),t.prototype.undepend=function(t){this._deps.delete(t),t.delete(this)},t.prototype.depend=function(t){this._deps.add(t),t.add(this),this.option&e.COMPUTED&&this.parent&&void 0!==this.parent.parent&&this.parent.depend(t)},t.prototype.clear=function(t){var n=this;if(this._deps.forEach((function(t){return t.delete(n)})),this._deps.clear(),!t)for(var e=0,r=this.children;e<r.length;e++){var i=r[e];i.emit("unmount"),i.clear(),i.parent=void 0}this.children.length=0},t.prototype.once=function(t,n){var e=this._once;(e[t]||(e[t]=[])).push(n)},t.prototype.emit=function(t){var n=this._once,e=n[t];if(e){for(var r=0,i=e;r<i.length;r++){(0,i[r])()}delete n[t]}},t.prototype.unmount=function(t){if(this.emit("unmount"),this.clear(t),!t){var n=this.parent&&this.parent.children;if(n&&n.splice(n.indexOf(this),1),this._sandbox){var e=this._sandbox[1].indexOf(this);e>=0&&this._sandbox[1].splice(e,1)}}this._sandbox=void 0,this.parent=void 0},t.prototype.mount=function(n){if(void 0!==this.parent)return new t(this.fn).mount(n);if(this.parent=n||a[0],this.parent){if(void 0===this.parent.parent)return this.parent=void 0,this;this.depth=this.parent.depth+1}else this.parent=null;return l.length&&(this._sandbox=l[0],this._sandbox[1].push(this)),this.parent&&this.parent.children.push(this),this._run(),this},t.prototype.update=function(){return this.clear(),this._run()},t.prototype.addRecord=function(t){var n=c.indexOf(this);n<0||u[n][0]<s.length?(u.unshift([s.length,[t]]),c.unshift(this)):u[n][1].push(t),this.option&e.COMPUTED&&this.parent&&void 0!==this.parent.parent&&this.parent.addRecord(t)},t.prototype._run=function(){this.is_run=!0,a.unshift(this),this.accu+=1;try{return this.res=this.fn()}catch(t){throw t}finally{a.shift(),this.is_run=!1,this.brokens.length=0}},t}();function _(t){return Array.prototype.concat.call(Object.getOwnPropertySymbols(t),Object.getOwnPropertyNames(t))}function y(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];C(t);try{return n.apply(void 0,e)}catch(t){throw t}finally{D()}}function g(t){return y.bind(null,t,2)}n.Subscriber=v,n.transacts=y,n.atom=g;var b=y.bind(null,2);n.runInAtom=b;var O=y.bind(null,18);function E(t){return y.bind(null,1,t)}n.action=E;var m=y.bind(null,1);function w(t,n){return void 0===n&&(n=7),S.bind(null,n,t)}n.runInAction=m,n.sandbox=w;var x=S.bind(null,7);function S(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=l[0],u=a[0],c=u&&u.option,s=4&t||!o?[]:o[1],f=s.length,h=4&t||!o?[]:o[0];u&&(u.option=1&t?c|e.PREVENT_COLLECT:c&~e.PREVENT_COLLECT),l.unshift([h,s,t|(o&&4&o[2])]);try{return n.apply(void 0,r)}catch(t){throw t}finally{if(l.shift(),4&t&&T(h),2&t){for(var p=s.length-1;p>=f;p--){var d=s[p];d.unmount(d.parent!==u)}s.length=f}else o&&4&t&&Array.prototype.push.apply(o[1],s);u&&(u.option=c)}}function T(t){var n=[];R(t,(function(t){var e=t[0],r=t[1],i=t[3];if(1&i)e._del(r);else if(4&~i){if(8&i)return void n.push(t);e._set(r,t[2])}}));for(var e=0,r=n;e<r.length;e++){var i=r[e];i[0]._set(i[1],i[2])}}function A(t){var n=new v(t);return n.mount(),function(){n.unmount()}}n.runInSandbox=x,n.autorun=A;var P=new Set([Object,Array,Map,Set,WeakMap,WeakSet]);function M(t){if(t&&"object"==typeof t){var n=f.get(t);if(n)t=n.proxy;else{var e=t.constructor;(P.has(e)||o[e.name]!==e)&&(t=new d(t).proxy)}}return t}function I(t,n){var r;void 0===n&&(n=null);var i=0,o=new v((function(){(i^=1)&&(r=t())}),e.COMPUTED);return o.parent=n,function(){return i||o.update(),r}}function j(t,n,e){var r=[],i=new v((function(){if(r.unshift(t()),r.length>1){var i=r[0],o=r[1];L(i,o)||n(i,o)}else 1===r.length&&e&&n(r[0]);r.length=1}));return i.mount(),function(){i.unmount()}}function N(t,n){return j(t,(function(t,e){L(t,e)||n(t)}))}function C(t){var n=s[0];void 0===t&&(t=n?2&n[0]:1),s.unshift([t])}function R(t,n){for(var e=new Map,r=!1,i=0,o=t;i<o.length;i++){var a=o[i],u=a[0],c=a[1],s=e.get(u);if(s){if(s.has(c))continue;s.add(c)}else e.set(u,new Set([c]));if(!L(1!==a[3]?u._val(c):u._has(c),a[2])){if(!n)return!0;-1===n(a)&&s.delete(c),r=!0}}return r}function D(){var t,n=[],e=Number.MAX_SAFE_INTEGER,r=s.length,i=s.shift();if(r>1&&(16&i[0]||2&i[0]&&2&s[0][0])){for(var o=[],a=[];c.length&&u[0][0]>=r;){var f=c.shift(),l=u.shift();(h=c.indexOf(f))<0||u[h][0]>=r?(o.push([r-1,l[1]]),a.push(f)):(t=u[h][1]).push.apply(t,l[1])}a.length&&(u.unshift.apply(u,o),c.unshift.apply(c,a))}else{for(;c.length&&u[0][0]>=r;){f=c.shift(),l=u.shift();if(n.indexOf(f)<0&&R(l[1])){for(var h=void 0;(h=c.lastIndexOf(f))>=0;)c.splice(h,1),u.splice(h,1);e=Math.min(e,f.depth),n.unshift(f)}}n.length&&(8&i[0]?m((function(){U(n,e)})):U(n,e))}}function U(t,n){void 0===n&&(n=0);var r,i,o=l[0],a=o&&4&o[2]&&o[1],u=function(t){return!a||a.indexOf(t)>=0};t:for(var c=t.length-1;c>=0;c--)if((r=t[c]).option&e.COMPUTED)t.splice(c,1),r.update();else{for(;(r=r.parent)&&r.depth>=n&&!r.is_run&&u(r);)if((i=t.indexOf(r))>=0){t[i].brokens.unshift(t[c]),t.splice(c,1);continue t}!(r=t[c]).is_run&&u(r)||t.splice(c,1)}for(c=0;c<t.length;c++)void 0!==(r=t[c]).parent&&r.update()}function L(t,n){return t===n||t!=t&&n!=n}function k(t){var n,e=t.target,o=e.__proto__,a=new d({}),u=(null===(n=Object.getOwnPropertyDescriptor(o,"size"))||void 0===n?void 0:n.get.bind(e))||function(){},c=e instanceof Map||e instanceof WeakMap;function s(t){return a.collect(t[0]),[t[0],M(t[1])]}function l(t){return a.collect(t[0]),M(t[1])}t.release=function(){return a.release(),t.release()},a._has=o.has.bind(e),a._val=c?function(t){return o.get.call(e,t)}:function(t){return o.has.call(e,t)?t:p},a._del=function(t){return o.delete.call(e,t)},a._set=o.set?function(t,n){return o.set.call(e,t,n)}:function(t,n){return o.add.call(e,t)};for(var v=r({get:function(t){return a.collect(t),M(o.get.call(e,t))},set:function(t,n){var r=f.get(t);r&&(t=r.target);var i=o.has.call(e,t),u=i?o.get.call(e,t):p;return i&&L(u,n)||O((function(){o.set.call(e,t,n),i||(a.notify(t,!1,1),a.notify(h,h,1)),a.notify(t,u)})),this},add:function(n){return o.has.call(e,n)||O((function(){var r=u();o.add.call(e,n),void 0!==r&&t.notify("size",r,6),a.notify(n,!1,1),a.notify(n,p),a.notify(h,h,1)})),this},delete:function(n){var r=o.get,i=r?r.call(e,n):n,c=u(),s=o.delete.call(e,n);return s&&O((function(){a.notify(n,i),a.notify(n,!0,1),a.notify(h,h,1),void 0!==c&&t.notify("size",c,6)})),s},clear:function(){var n=u();n&&O((function(){o.forEach.call(e,(function(t,n){a.notify(n,t),a.notify(n,!0,1)})),a.notify(h,h,1),t.notify("size",n,6),o.clear.call(e)}))},forEach:function(t){for(var n,r=[],u=1;u<arguments.length;u++)r[u-1]=arguments[u];return a.collect(h,1),(n=o.forEach).call.apply(n,i([e,function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t.apply(void 0,i([M(n)],e))}],r))},has:function(t){return a.collect(t,1),o.has.call(e,t)},size:u},[["keys",function(t){return t[0]}],["entries",s],["values",l],[Symbol.iterator,c?s:l]].reduce((function(t,n){var r=n[0],i=n[1],u=o.entries;return u&&(t[r]=function(){a.collect(h,1);var t=u.call(e),n=t.next.bind(t);return t.next=function(){var t=n(),e=t.done,r=t.value;return e||(r=i(r)),{done:e,value:r}},t}),t}),{})),y={},g=0,b=_(o);g<b.length;g++){var E=b[g],m=v[E],w=Object.getOwnPropertyDescriptor(o,E);m&&(void 0!==w.value?w.value=m:w.get=m),y[E]=w}e.__proto__=Object.create(e.__proto__.__proto__,y)}n.observable=M,n.computed=I,n.watch=j,n.reaction=N;var F={Observer:d,Subscriber:v,observable:M,autorun:A,atom:g,runInAtom:b,action:E,runInAction:m,sandbox:w,runInSandbox:x,transacts:y,SUBSCRIBE_OPTION:e,computed:I,watch:j,reaction:N,MASK_ITERATE:h,MASK_UNDEFINED:p};o._obb=F}).call(this,e(1))},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e}]));
//# sourceMappingURL=obb.js.map